function a0_0x323f(_0x5f4db3,_0x515e4f){const _0xb8a2f7=a0_0xb8a2();return a0_0x323f=function(_0x323fd9,_0x272227){_0x323fd9=_0x323fd9-0x191;let _0x521917=_0xb8a2f7[_0x323fd9];return _0x521917;},a0_0x323f(_0x5f4db3,_0x515e4f);}const a0_0xe3efa5=a0_0x323f;function a0_0xb8a2(){const _0x2e5c10=['1306868VTQDXn','loadScheduledMessages','stringify','writeFileSync','active','ensureConfigDirectory','listScheduledMessages','generateUniqueId','type','chatId','scheduleMessage','Error\x20saving\x20scheduled\x20messages:','281058QmBACz','Error\x20sending\x20scheduled\x20message:','6835472XqQYub','toString','string','1350450WyjAXP','setSock','scheduleJob','message','map','10XaFFUe','dirname','configPath','saveScheduledMessages','object','1268154NvVZCn','error','join','sock','Invalid\x20WhatsApp\x20connection\x20provided','node-schedule','existsSync','WhatsApp\x20connection\x20(sock)\x20is\x20not\x20set','1352206yhaYMJ','readFileSync','splice','path','scheduledMessages','4554234lqeHXO','now','schedule','cancel','substr','job','push','154oaAdVO','Invalid\x20message\x20format','parse','repeat','cancelScheduledMessage','Error\x20loading\x20scheduled\x20messages:','Invalid\x20message\x20configuration:\x20chatId\x20and\x20message\x20are\x20required'];a0_0xb8a2=function(){return _0x2e5c10;};return a0_0xb8a2();}(function(_0x453150,_0x52e76a){const _0x445e9d=a0_0x323f,_0x2d0416=_0x453150();while(!![]){try{const _0x4d8b05=-parseInt(_0x445e9d(0x1af))/0x1+parseInt(_0x445e9d(0x19d))/0x2+parseInt(_0x445e9d(0x1a7))/0x3+parseInt(_0x445e9d(0x1c2))/0x4*(parseInt(_0x445e9d(0x1a2))/0x5)+parseInt(_0x445e9d(0x198))/0x6*(-parseInt(_0x445e9d(0x1bb))/0x7)+parseInt(_0x445e9d(0x19a))/0x8+parseInt(_0x445e9d(0x1b4))/0x9;if(_0x4d8b05===_0x52e76a)break;else _0x2d0416['push'](_0x2d0416['shift']());}catch(_0x4cbf2f){_0x2d0416['push'](_0x2d0416['shift']());}}}(a0_0xb8a2,0xb1ffd));const schedule=require(a0_0xe3efa5(0x1ac)),fs=require('fs'),path=require(a0_0xe3efa5(0x1b2));class ScheduledMessageManager{constructor(_0x85877d=null){const _0x18203f=a0_0xe3efa5;this[_0x18203f(0x1a4)]=_0x85877d||path[_0x18203f(0x1a9)](__dirname,'..','..','Database','scheduled_messages.json'),this[_0x18203f(0x1b3)]=[],this[_0x18203f(0x1aa)]=null,this[_0x18203f(0x1c3)]();}[a0_0xe3efa5(0x19e)](_0x50a627){const _0x16e21d=a0_0xe3efa5;if(!_0x50a627)throw new Error(_0x16e21d(0x1ab));return this[_0x16e21d(0x1aa)]=_0x50a627,this;}['ensureConfigDirectory'](){const _0x3d3cdb=a0_0xe3efa5,_0x274551=path[_0x3d3cdb(0x1a3)](this['configPath']);!fs[_0x3d3cdb(0x1ad)](_0x274551)&&fs['mkdirSync'](_0x274551,{'recursive':!![]});}['loadScheduledMessages'](){const _0x4100ec=a0_0xe3efa5;try{this[_0x4100ec(0x191)]();!fs[_0x4100ec(0x1ad)](this[_0x4100ec(0x1a4)])&&fs[_0x4100ec(0x1c5)](this[_0x4100ec(0x1a4)],JSON[_0x4100ec(0x1c4)]([]));const _0x10bb9c=fs[_0x4100ec(0x1b0)](this['configPath'],'utf8'),_0xfb88ee=JSON[_0x4100ec(0x1bd)](_0x10bb9c);this[_0x4100ec(0x1b3)]=[],_0xfb88ee['forEach'](_0x2a9543=>{const _0x16cd4d=_0x4100ec;try{this[_0x16cd4d(0x196)](_0x2a9543);}catch(_0x224f11){console['error']('Error\x20rescheduling\x20message:',_0x224f11);}});}catch(_0x4a8b18){console[_0x4100ec(0x1a8)](_0x4100ec(0x1c0),_0x4a8b18),this['scheduledMessages']=[];}}[a0_0xe3efa5(0x1a5)](){const _0x55e269=a0_0xe3efa5;try{const _0x521b44=this['scheduledMessages'][_0x55e269(0x1a1)](_0x399c67=>({'id':_0x399c67['id'],'type':_0x399c67[_0x55e269(0x194)],'chatId':_0x399c67[_0x55e269(0x195)],'message':_0x399c67[_0x55e269(0x1a0)],'schedule':_0x399c67['schedule'],'repeat':_0x399c67[_0x55e269(0x1be)]}));fs['writeFileSync'](this[_0x55e269(0x1a4)],JSON[_0x55e269(0x1c4)](_0x521b44,null,0x2));}catch(_0x450841){console['error'](_0x55e269(0x197),_0x450841);}}[a0_0xe3efa5(0x196)](_0x334623){const _0x329a01=a0_0xe3efa5;if(!_0x334623[_0x329a01(0x195)]||!_0x334623[_0x329a01(0x1a0)])throw new Error(_0x329a01(0x1c1));const _0x3084c6=this[_0x329a01(0x193)](),_0x36a9fe=_0x334623[_0x329a01(0x1b6)]instanceof Date?_0x334623[_0x329a01(0x1b6)]:new Date(_0x334623['schedule']),_0x394351=schedule[_0x329a01(0x19f)](_0x36a9fe,async()=>{const _0xcec013=_0x329a01;try{if(!this[_0xcec013(0x1aa)])throw new Error(_0xcec013(0x1ae));let _0x151bb1;if(typeof _0x334623['message']===_0xcec013(0x19c))_0x151bb1={'text':_0x334623['message']};else{if(typeof _0x334623[_0xcec013(0x1a0)]===_0xcec013(0x1a6))_0x151bb1=_0x334623[_0xcec013(0x1a0)];else throw new Error(_0xcec013(0x1bc));}await this[_0xcec013(0x1aa)]['sendMessage'](_0x334623[_0xcec013(0x195)],_0x151bb1),!_0x334623['repeat']&&this[_0xcec013(0x1bf)](_0x3084c6);}catch(_0x4d5ceb){console[_0xcec013(0x1a8)](_0xcec013(0x199),_0x4d5ceb);}}),_0x18733b={'id':_0x3084c6,..._0x334623,'job':_0x394351,'active':!![]};return this[_0x329a01(0x1b3)][_0x329a01(0x1ba)](_0x18733b),this[_0x329a01(0x1a5)](),_0x3084c6;}[a0_0xe3efa5(0x1bf)](_0x23abd4){const _0x8b3538=a0_0xe3efa5,_0x3d0da6=this[_0x8b3538(0x1b3)]['findIndex'](_0x547983=>_0x547983['id']===_0x23abd4);if(_0x3d0da6!==-0x1){const _0x31edf2=this[_0x8b3538(0x1b3)][_0x3d0da6][_0x8b3538(0x1b9)];_0x31edf2&&_0x31edf2[_0x8b3538(0x1b7)](),this[_0x8b3538(0x1b3)][_0x8b3538(0x1b1)](_0x3d0da6,0x1),this['saveScheduledMessages']();}}[a0_0xe3efa5(0x192)](){const _0x549b80=a0_0xe3efa5;return this[_0x549b80(0x1b3)]['map'](_0x57fb28=>({'id':_0x57fb28['id'],'type':_0x57fb28[_0x549b80(0x194)],'chatId':_0x57fb28[_0x549b80(0x195)],'schedule':_0x57fb28[_0x549b80(0x1b6)],'message':_0x57fb28['message'],'active':_0x57fb28[_0x549b80(0x1c6)]}));}['generateUniqueId'](){const _0x5f0259=a0_0xe3efa5;return Date[_0x5f0259(0x1b5)]()['toString'](0x24)+Math['random']()[_0x5f0259(0x19b)](0x24)[_0x5f0259(0x1b8)](0x2);}}module['exports']=ScheduledMessageManager;