const a0_0x3ce1ac=a0_0xff2a;(function(_0x52baa7,_0x159644){const _0x2bd72e=a0_0xff2a,_0x1ab218=_0x52baa7();while(!![]){try{const _0x2d9d28=-parseInt(_0x2bd72e(0x161))/0x1+-parseInt(_0x2bd72e(0x17d))/0x2+-parseInt(_0x2bd72e(0x169))/0x3+-parseInt(_0x2bd72e(0x156))/0x4+-parseInt(_0x2bd72e(0x151))/0x5*(-parseInt(_0x2bd72e(0x14f))/0x6)+parseInt(_0x2bd72e(0x16e))/0x7+parseInt(_0x2bd72e(0x168))/0x8;if(_0x2d9d28===_0x159644)break;else _0x1ab218['push'](_0x1ab218['shift']());}catch(_0x3cbf6d){_0x1ab218['push'](_0x1ab218['shift']());}}}(a0_0x3e6b,0x4cc44));const a0_0x163eec=a0_0x3350;function a0_0x4aaa(){const _0x4ed6b7=a0_0xff2a,_0x24e35c=[_0x4ed6b7(0x157),_0x4ed6b7(0x17c),_0x4ed6b7(0x178),_0x4ed6b7(0x187),'https://drive.google.com/drive/folders/',_0x4ed6b7(0x15d),_0x4ed6b7(0x159),_0x4ed6b7(0x189),'180935tGZeYc',_0x4ed6b7(0x160),_0x4ed6b7(0x177),_0x4ed6b7(0x15b),_0x4ed6b7(0x17f),_0x4ed6b7(0x175),'1337508hfCWyW',_0x4ed6b7(0x148),'mkdir',_0x4ed6b7(0x154),'pipe','Invalid\x20file\x20URL','unlink',_0x4ed6b7(0x146),_0x4ed6b7(0x16c),_0x4ed6b7(0x188),_0x4ed6b7(0x179),_0x4ed6b7(0x144),_0x4ed6b7(0x152),'exports','get',_0x4ed6b7(0x174),_0x4ed6b7(0x15f),_0x4ed6b7(0x149),_0x4ed6b7(0x14d),_0x4ed6b7(0x14e),_0x4ed6b7(0x166),_0x4ed6b7(0x15a),_0x4ed6b7(0x15e),_0x4ed6b7(0x163),_0x4ed6b7(0x17e),_0x4ed6b7(0x14b),_0x4ed6b7(0x16a),'sendMessage',_0x4ed6b7(0x16f),_0x4ed6b7(0x153),_0x4ed6b7(0x16b),'archiver',_0x4ed6b7(0x167),_0x4ed6b7(0x16d),_0x4ed6b7(0x155),_0x4ed6b7(0x15c),'mimeType',_0x4ed6b7(0x145),_0x4ed6b7(0x183),_0x4ed6b7(0x14c),'error',_0x4ed6b7(0x176),_0x4ed6b7(0x170),_0x4ed6b7(0x181),_0x4ed6b7(0x186),_0x4ed6b7(0x184)];return a0_0x4aaa=function(){return _0x24e35c;},a0_0x4aaa();}(function(_0x17074c,_0x32aeca){const _0x41183e=a0_0xff2a,_0x38c61a=a0_0x3350,_0x25a337=_0x17074c();while(!![]){try{const _0x36a89f=-parseInt(_0x38c61a(0x1b4))/0x1+-parseInt(_0x38c61a(0x1a1))/0x2+-parseInt(_0x38c61a(0x1a8))/0x3+-parseInt(_0x38c61a(0x1b1))/0x4*(-parseInt(_0x38c61a(0x19b))/0x5)+parseInt(_0x38c61a(0x19f))/0x6+parseInt(_0x38c61a(0x1a9))/0x7*(-parseInt(_0x38c61a(0x1a4))/0x8)+-parseInt(_0x38c61a(0x1b0))/0x9*(-parseInt(_0x38c61a(0x1a2))/0xa);if(_0x36a89f===_0x32aeca)break;else _0x25a337[_0x41183e(0x17b)](_0x25a337[_0x41183e(0x162)]());}catch(_0x57cbed){_0x25a337[_0x41183e(0x17b)](_0x25a337[_0x41183e(0x162)]());}}}(a0_0x4aaa,0x5cd79));const fetch=require(a0_0x163eec(0x19d)),fs=require('fs')[a0_0x163eec(0x1c4)],fsSync=require('fs'),path=require('path'),archiver=require(a0_0x163eec(0x1c0)),axios=require(a0_0x163eec(0x1ca)),TEMP_DIR=path[a0_0x163eec(0x1c8)](__dirname,a0_0x163eec(0x1cb));module[a0_0x163eec(0x1ae)]={'usage':[a0_0x3ce1ac(0x173),'googledrive'],'desc':'Download\x20files/folders\x20from\x20Google\x20Drive','commandType':a0_0x163eec(0x1bd),'isGroupOnly':![],'isAdminOnly':![],'isPrivateOnly':![],'emoji':'☁️','execute':handleDriveCommand};async function handleDriveCommand(_0x3a37c3,_0x4c34aa,_0x3ce224){const _0x138daa=a0_0x3ce1ac,_0x121ed4=a0_0x163eec;if(!_0x3ce224[0x0])return await replyMessage(_0x4c34aa,_0x121ed4(0x1be));const _0x3fe74d=_0x3ce224[0x0];try{if(!isValidDriveUrl(_0x3fe74d))return await replyMessage(_0x4c34aa,_0x121ed4(0x1ad));_0x3fe74d[_0x138daa(0x155)](_0x121ed4(0x1b6))?await handleFolder(_0x3fe74d,_0x3a37c3,_0x4c34aa):await handleFile(_0x3fe74d,_0x3a37c3,_0x4c34aa);}catch(_0x3f0354){console[_0x121ed4(0x1c9)](_0x138daa(0x147),_0x3f0354),await replyMessage(_0x4c34aa,'❌\x20Error:\x20'+(_0x3f0354[_0x121ed4(0x1b8)]||_0x121ed4(0x1a0)));}}function a0_0x3e6b(){const _0x25c605=['Invalid\x20folder\x20URL','content-type','Failed\x20to\x20get\x20folder\x20contents:\x20','headers','remoteJid','Folder\x20processing\x20failed:\x20','1008618XCFAyS','Drive\x20Download\x20Error:','231940BbKviF','finish','downloadUrl','createReadStream','join','&export=download&confirm=','418016fTOhCp','5592cYcwVL','set-cookie','445ZhbJNk','*❌\x20Invalid\x20Google\x20Drive\x20URL.*','*_❌\x20Please\x20provide\x20a\x20Google\x20Drive\x20URL._*','4370776qqFTtQ','includes','1857768dIMohT','length','📂\x20Found\x20','fileName','/folders/','&export=download','promises','match','Failed\x20to\x20get\x20download\x20info:\x20','36pqdcQN','data','95423aBKDnP','shift','message','content-disposition','map','access','createWriteStream','9163720iaZhCE','951249MTqwUQ','stream','split','7HMCQSF','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/91.0.4472.124\x20Safari/537.36','3576825CXPIGJ','Download','../tmp/','kord','key','gdrive','711gqAxxE','Unknown\x20error\x20occurred','axios','node-fetch','GET','application/octet-stream','Download\x20failed:\x20','push','test','1096008lIepIb','https://drive.google.com/uc?id=','1149570WKXdjn','No\x20accessible\x20files\x20found','Error\x20with\x20file\x20','reply','\x20files.\x20Starting\x20download...','✅\x20Sent:\x20','⏳\x20Downloading:\x20'];a0_0x3e6b=function(){return _0x25c605;};return a0_0x3e6b();}async function handleFolder(_0x328af7,_0x92c843,_0x3f6361){const _0x308137=a0_0x3ce1ac,_0x1755f1=a0_0x163eec;try{const _0x3b00c3=await getFolderFiles(_0x328af7);if(!_0x3b00c3[_0x1755f1(0x193)])throw new Error(_0x308137(0x180));await replyMessage(_0x3f6361,_0x308137(0x158)+_0x3b00c3[_0x1755f1(0x193)]+_0x1755f1(0x1c7));for(const _0x1b60eb of _0x3b00c3){try{await downloadAndSendFile(_0x1b60eb,_0x92c843,_0x3f6361),await new Promise(_0x254c47=>setTimeout(_0x254c47,0x3e8));}catch(_0x21737a){console['error'](_0x1755f1(0x1cc)+_0x1b60eb+':',_0x21737a);}}await replyMessage(_0x3f6361,'✅\x20Folder\x20download\x20completed!');}catch(_0x3ef3df){throw new Error(_0x1755f1(0x1c6)+_0x3ef3df[_0x1755f1(0x1b8)]);}}async function getFolderFiles(_0x5098a6){const _0x2700c5=a0_0x3ce1ac,_0x1a389f=a0_0x163eec;try{const _0x57b8d1=_0x5098a6[_0x1a389f(0x198)](/folders\/([^/?]+)/)?.[0x1];if(!_0x57b8d1)throw new Error(_0x1a389f(0x1cd));const _0x2bfb1c=await axios[_0x1a389f(0x1af)](_0x1a389f(0x197)+_0x57b8d1,{'headers':{'User-Agent':_0x2700c5(0x16d)}}),_0x290f40=[],_0x246212=_0x2bfb1c[_0x2700c5(0x160)][_0x2700c5(0x15d)](/\/file\/d\/([^/"\s]+)/g)||[];for(const _0x144470 of _0x246212){const _0x362761=_0x144470[_0x1a389f(0x1bf)]('/')[0x3];_0x362761&&!_0x290f40[_0x1a389f(0x1c3)](_0x362761)&&_0x290f40['push'](_0x362761);}return _0x290f40;}catch(_0x40b4f3){throw new Error(_0x1a389f(0x1aa)+_0x40b4f3[_0x1a389f(0x1b8)]);}}async function handleFile(_0x5720af,_0x189f71,_0x25e4c1){const _0x3ce838=a0_0x163eec,_0x35b8f7=extractFileId(_0x5720af);if(!_0x35b8f7)throw new Error(_0x3ce838(0x1a6));await downloadAndSendFile(_0x35b8f7,_0x189f71,_0x25e4c1);}async function downloadAndSendFile(_0x1deb8c,_0x1c298c,_0x2be31a){const _0x37c380=a0_0x3ce1ac,_0x512f1c=a0_0x163eec;try{const _0x4bc025=await getDownloadInfo(_0x1deb8c);await replyMessage(_0x2be31a,_0x37c380(0x185)+_0x4bc025[_0x512f1c(0x199)]);const _0x392920=path['join'](TEMP_DIR,_0x4bc025[_0x37c380(0x159)]);await downloadFile(_0x4bc025[_0x37c380(0x14a)],_0x392920),await _0x1c298c[_0x512f1c(0x1bc)](_0x2be31a[_0x37c380(0x172)][_0x512f1c(0x1ac)],{'document':fsSync[_0x512f1c(0x1ba)](_0x392920),'fileName':_0x4bc025[_0x512f1c(0x199)],'mimetype':_0x4bc025[_0x512f1c(0x1c5)]||_0x512f1c(0x1ab)},{'quoted':_0x2be31a}),await fs[_0x512f1c(0x1a7)](_0x392920),await replyMessage(_0x2be31a,_0x512f1c(0x1ce)+_0x4bc025[_0x512f1c(0x199)]);}catch(_0x4356f1){throw new Error(_0x37c380(0x17a)+_0x4356f1[_0x37c380(0x163)]);}}async function getDownloadInfo(_0x4f7c34){const _0x598295=a0_0x3ce1ac,_0x1bde71=a0_0x163eec;try{const _0x218171=await axios[_0x1bde71(0x1af)](_0x1bde71(0x1b9)+_0x4f7c34+_0x1bde71(0x19e),{'headers':{'User-Agent':_0x1bde71(0x1c2)},'maxRedirects':0x0,'validateStatus':_0x552ee3=>_0x552ee3>=0xc8&&_0x552ee3<0x190}),_0x5801e3=_0x218171[_0x1bde71(0x19c)][_0x1bde71(0x198)](/confirm=([^&]+)/)?.[0x1],_0x219453=_0x218171[_0x1bde71(0x19a)][_0x598295(0x150)]?.[_0x598295(0x165)](_0x277e9b=>_0x277e9b[_0x1bde71(0x1bf)](';')[0x0])[_0x1bde71(0x1c8)](';\x20');let _0x5df803,_0x444a41=_0x4f7c34,_0xbfce09=_0x1bde71(0x1ab);_0x5801e3?_0x5df803=_0x1bde71(0x1b9)+_0x4f7c34+_0x1bde71(0x1b3)+_0x5801e3:_0x5df803=_0x1bde71(0x1b9)+_0x4f7c34+_0x1bde71(0x19e);const _0x34ec6e=_0x218171[_0x1bde71(0x19a)][_0x598295(0x164)];if(_0x34ec6e){const _0x38d10f=_0x34ec6e[_0x598295(0x15d)](/filename\*?=['"]?(?:UTF-\d['"]*)?([^;\r\n"']*)['"]?;?/i);_0x38d10f&&(_0x444a41=decodeURIComponent(_0x38d10f[0x1]));}const _0x59d7f5=_0x218171[_0x1bde71(0x19a)][_0x1bde71(0x196)];return _0x59d7f5&&(_0xbfce09=_0x59d7f5),{'downloadUrl':_0x5df803,'fileName':_0x444a41,'mimeType':_0xbfce09,'cookies':_0x219453};}catch(_0x965c1a){throw new Error(_0x1bde71(0x1b7)+_0x965c1a[_0x598295(0x163)]);}}async function downloadFile(_0x4c3930,_0x4bb5b0){const _0x1d3bc0=a0_0x163eec,_0x30da68=await axios({'method':_0x1d3bc0(0x195),'url':_0x4c3930,'responseType':_0x1d3bc0(0x1bb),'headers':{'User-Agent':_0x1d3bc0(0x1c2)}}),_0x46b786=fsSync[_0x1d3bc0(0x1c1)](_0x4bb5b0);return _0x30da68[_0x1d3bc0(0x19c)][_0x1d3bc0(0x1a5)](_0x46b786),new Promise((_0x1cbdd0,_0x3c096e)=>{const _0x22a826=_0x1d3bc0;_0x46b786['on'](_0x22a826(0x1b2),_0x1cbdd0),_0x46b786['on'](_0x22a826(0x1c9),_0x3c096e);});}function isValidDriveUrl(_0x33c45c){const _0x2b819d=a0_0x163eec;return/drive\.google\.com\/(file\/d\/|drive\/folders\/)/i[_0x2b819d(0x194)](_0x33c45c);}function extractFileId(_0x44f385){const _0x57c421=a0_0x163eec,_0x595e05=_0x44f385[_0x57c421(0x198)](/\/file\/d\/([^/]+)/);return _0x595e05?_0x595e05[0x1]:null;}function a0_0xff2a(_0x1b2381,_0xd57b79){const _0x3e6b86=a0_0x3e6b();return a0_0xff2a=function(_0xff2a76,_0x30b169){_0xff2a76=_0xff2a76-0x144;let _0x39dc3b=_0x3e6b86[_0xff2a76];return _0x39dc3b;},a0_0xff2a(_0x1b2381,_0xd57b79);}async function replyMessage(_0x371408,_0x2e636a){const _0x2130a8=a0_0x3ce1ac;return await global[_0x2130a8(0x171)][_0x2130a8(0x182)](_0x371408,_0x2e636a);}function a0_0x3350(_0x312518,_0x5cc77c){const _0x1b2507=a0_0x4aaa();return a0_0x3350=function(_0x4bfded,_0x1c18b0){_0x4bfded=_0x4bfded-0x193;let _0x3d7528=_0x1b2507[_0x4bfded];return _0x3d7528;},a0_0x3350(_0x312518,_0x5cc77c);}((async()=>{const _0x199d0c=a0_0x163eec;try{await fs[_0x199d0c(0x1b5)](TEMP_DIR);}catch{await fs[_0x199d0c(0x1a3)](TEMP_DIR,{'recursive':!![]});}})());