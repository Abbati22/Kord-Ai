const a0_0x1e578b=a0_0x13f0;(function(_0x23dfc9,_0x23ec21){const _0x2ed35c=a0_0x13f0,_0x383170=_0x23dfc9();while(!![]){try{const _0x5a8a98=parseInt(_0x2ed35c(0x120))/0x1*(parseInt(_0x2ed35c(0x131))/0x2)+parseInt(_0x2ed35c(0x170))/0x3+parseInt(_0x2ed35c(0x121))/0x4*(parseInt(_0x2ed35c(0x145))/0x5)+parseInt(_0x2ed35c(0x168))/0x6*(-parseInt(_0x2ed35c(0x15f))/0x7)+parseInt(_0x2ed35c(0x161))/0x8+-parseInt(_0x2ed35c(0x12d))/0x9*(-parseInt(_0x2ed35c(0x163))/0xa)+parseInt(_0x2ed35c(0x158))/0xb;if(_0x5a8a98===_0x23ec21)break;else _0x383170['push'](_0x383170['shift']());}catch(_0x30fbd7){_0x383170['push'](_0x383170['shift']());}}}(a0_0x4887,0x793b7));function a0_0x13f0(_0x536bbd,_0x15cd18){const _0x48871f=a0_0x4887();return a0_0x13f0=function(_0x13f01e,_0x370894){_0x13f01e=_0x13f01e-0x116;let _0xe9f50=_0x48871f[_0x13f01e];return _0xe9f50;},a0_0x13f0(_0x536bbd,_0x15cd18);}const axios=require(a0_0x1e578b(0x128)),fs=require('fs')[a0_0x1e578b(0x165)],path=require(a0_0x1e578b(0x171)),AdmZip=require(a0_0x1e578b(0x134)),{spawn}=require('child_process'),semver=require(a0_0x1e578b(0x127)),config={'github':{'owner':'M3264','repo':a0_0x1e578b(0x174)},'paths':{'root':path[a0_0x1e578b(0x14e)](__dirname,'..','..','..'),'temp':path['join'](path[a0_0x1e578b(0x14e)](__dirname,'..','..','..'),a0_0x1e578b(0x17c)),'zip':path[a0_0x1e578b(0x116)](path[a0_0x1e578b(0x14e)](__dirname,'..','..','..'),a0_0x1e578b(0x147))},'protected':[a0_0x1e578b(0x13e),'Config.js',a0_0x1e578b(0x12c),a0_0x1e578b(0x122),a0_0x1e578b(0x11c),path[a0_0x1e578b(0x116)]('..','..',a0_0x1e578b(0x149)),a0_0x1e578b(0x178)]};function isProtectedPath(_0x1d57f8){const _0x522ac9=a0_0x1e578b,_0x5606b2=path[_0x522ac9(0x162)](_0x1d57f8)[_0x522ac9(0x152)](/\\/g,'/');return config[_0x522ac9(0x177)][_0x522ac9(0x13c)](_0x1d9314=>{const _0x36ec9d=_0x522ac9,_0x255d62=path[_0x36ec9d(0x162)](_0x1d9314)[_0x36ec9d(0x152)](/\\/g,'/');return _0x5606b2===_0x255d62||_0x5606b2[_0x36ec9d(0x17e)](_0x255d62+'/')||_0x5606b2['includes']('/'+_0x255d62+'/');});}async function ensureDir(_0x291b5f){const _0xfcaad3=a0_0x1e578b;try{await fs[_0xfcaad3(0x13a)](_0x291b5f);}catch{await fs[_0xfcaad3(0x166)](_0x291b5f,{'recursive':!![]});}}async function removeDir(_0x3c698c){const _0x516489=a0_0x1e578b;if(isProtectedPath(_0x3c698c)){console[_0x516489(0x15e)](_0x516489(0x176)+_0x3c698c);return;}try{await fs['rm'](_0x3c698c,{'recursive':!![],'force':!![]});}catch(_0x5de90d){console[_0x516489(0x15e)](_0x516489(0x157)+_0x3c698c+':\x20'+_0x5de90d[_0x516489(0x151)]);}}async function getVersions(){const _0x5b01ba=a0_0x1e578b;try{const _0x1ea18c=JSON['parse'](await fs[_0x5b01ba(0x17a)](path[_0x5b01ba(0x116)](config[_0x5b01ba(0x164)][_0x5b01ba(0x13b)],'package.json'),_0x5b01ba(0x14c))),{data:_0x113caa}=await axios[_0x5b01ba(0x155)](_0x5b01ba(0x154)+config[_0x5b01ba(0x136)][_0x5b01ba(0x173)]+'/'+config[_0x5b01ba(0x136)]['repo']+_0x5b01ba(0x14b));return{'current':_0x1ea18c['version'],'latest':_0x113caa[_0x5b01ba(0x130)][_0x5b01ba(0x152)](/^v/,''),'downloadUrl':_0x113caa[_0x5b01ba(0x17d)]};}catch(_0x577825){console[_0x5b01ba(0x12f)](_0x5b01ba(0x179),_0x577825);throw new Error('Failed\x20to\x20get\x20versions:\x20'+_0x577825[_0x5b01ba(0x151)]);}}async function downloadAndExtract(_0x52d2a5){const _0xd20985=a0_0x1e578b;try{const _0x2764b7=await axios['get'](_0x52d2a5,{'responseType':'arraybuffer','timeout':0x7530});await fs[_0xd20985(0x138)](config[_0xd20985(0x164)]['zip'],_0x2764b7[_0xd20985(0x156)]);const _0x9cb35b=new AdmZip(config['paths']['zip']);await new Promise((_0x523d1f,_0x5650ed)=>{const _0x57e745=_0xd20985;_0x9cb35b[_0x57e745(0x159)](config[_0x57e745(0x164)][_0x57e745(0x13d)],!![],_0x1e8695=>{const _0x44dd55=_0x57e745;if(_0x1e8695)_0x5650ed(new Error(_0x44dd55(0x17b)+_0x1e8695[_0x44dd55(0x151)]));else _0x523d1f();});});}catch(_0xbd873d){console[_0xd20985(0x12f)](_0xd20985(0x15b),_0xbd873d);throw new Error(_0xd20985(0x12e)+_0xbd873d['message']);}}async function mapDirectory(_0x404696,_0x4bd9c9=_0x404696){const _0x336409=new Map();async function _0x2c3455(_0x5c64ae){const _0x5d9ebc=a0_0x13f0,_0x2c2262=await fs[_0x5d9ebc(0x133)](_0x5c64ae,{'withFileTypes':!![]});for(const _0x39284c of _0x2c2262){const _0x249f7c=path[_0x5d9ebc(0x116)](_0x5c64ae,_0x39284c[_0x5d9ebc(0x153)]),_0x5b373c=path[_0x5d9ebc(0x160)](_0x4bd9c9,_0x249f7c);if(_0x39284c[_0x5d9ebc(0x144)]())!isProtectedPath(_0x5b373c)&&await _0x2c3455(_0x249f7c);else{if(!isProtectedPath(_0x5b373c)){const _0x388abf=await fs['stat'](_0x249f7c);_0x336409[_0x5d9ebc(0x11d)](_0x5b373c,{'path':_0x249f7c,'stats':_0x388abf,'type':path[_0x5d9ebc(0x129)](_0x39284c[_0x5d9ebc(0x153)])[_0x5d9ebc(0x13f)]()});}}}}return await _0x2c3455(_0x404696),_0x336409;}async function enhancedFileSync(_0x575d92,_0x1099e3){const _0xe670aa=a0_0x1e578b;try{const _0x3c649b=await mapDirectory(_0x575d92),_0x4b2a91=await mapDirectory(_0x1099e3),_0x3fc459=[],_0x4cfe49=[];for(const [_0x32a9ce,_0x5f5df6]of _0x3c649b){if(isProtectedPath(_0x32a9ce)){console['log']('Skipping\x20protected\x20path:\x20'+_0x32a9ce);continue;}const _0x3be27f=path['join'](_0x1099e3,_0x32a9ce);try{await ensureDir(path['dirname'](_0x3be27f)),await fs['copyFile'](_0x5f5df6[_0xe670aa(0x171)],_0x3be27f),_0x3fc459['push'](_0x32a9ce);}catch(_0x11f5d5){console[_0xe670aa(0x12f)](_0xe670aa(0x16f)+_0x32a9ce+':',_0x11f5d5),_0x4cfe49[_0xe670aa(0x139)](_0x32a9ce+':\x20'+_0x11f5d5['message']);}}for(const [_0x15a748,_0x236469]of _0x4b2a91){if(!_0x3c649b['has'](_0x15a748)&&!isProtectedPath(_0x15a748))try{await fs[_0xe670aa(0x132)](_0x236469['path']),_0x3fc459[_0xe670aa(0x139)](_0xe670aa(0x14a)+_0x15a748);}catch(_0x5022d8){console['error']('Error\x20removing\x20'+_0x15a748+':',_0x5022d8),_0x4cfe49['push'](_0xe670aa(0x11b)+_0x15a748+':\x20'+_0x5022d8[_0xe670aa(0x151)]);}}return{'updates':_0x3fc459,'errors':_0x4cfe49};}catch(_0x3bae7a){return console[_0xe670aa(0x12f)](_0xe670aa(0x12b),_0x3bae7a),{'updates':[],'errors':[_0x3bae7a['message']]};}}async function performUpdate(){const _0x1155c7=a0_0x1e578b;try{const _0x1f834d=await fs[_0x1155c7(0x133)](config[_0x1155c7(0x164)][_0x1155c7(0x13d)]),_0x2ac316=path[_0x1155c7(0x116)](config[_0x1155c7(0x164)][_0x1155c7(0x13d)],_0x1f834d[0x0]);return await enhancedFileSync(_0x2ac316,config[_0x1155c7(0x164)][_0x1155c7(0x13b)]);}catch(_0x16349a){console[_0x1155c7(0x12f)](_0x1155c7(0x118),_0x16349a);throw new Error(_0x1155c7(0x16a)+_0x16349a[_0x1155c7(0x151)]);}}async function cleanup(){const _0xa0a901=a0_0x1e578b;try{await Promise[_0xa0a901(0x16b)]([removeDir(config['paths'][_0xa0a901(0x13d)]),fs[_0xa0a901(0x132)](config[_0xa0a901(0x164)][_0xa0a901(0x15c)])[_0xa0a901(0x11f)](()=>{})]);}catch(_0x65765e){console['error'](_0xa0a901(0x123),_0x65765e);}}async function checkAndAutoUpdate(){const _0x2db2db=a0_0x1e578b;try{console['log']('Checking\x20for\x20updates\x20at\x20startup...');const _0x96d938=await getVersions();console['log'](_0x2db2db(0x16e)+_0x96d938[_0x2db2db(0x11e)]+_0x2db2db(0x150)+_0x96d938['latest']);if(!_0x96d938[_0x2db2db(0x146)]||!semver['valid'](_0x96d938[_0x2db2db(0x146)]))throw new Error(_0x2db2db(0x12a));if(semver['gt'](_0x96d938[_0x2db2db(0x146)],_0x96d938[_0x2db2db(0x11e)])){console[_0x2db2db(0x15e)](_0x2db2db(0x117)),await ensureDir(config[_0x2db2db(0x164)][_0x2db2db(0x13d)]),await downloadAndExtract(_0x96d938[_0x2db2db(0x175)]),console['log'](_0x2db2db(0x167)),console[_0x2db2db(0x15e)]('üì¶\x20Installing\x20updates...');const {updates:updates=[],errors:errors=[]}=await performUpdate();console[_0x2db2db(0x15e)](_0x2db2db(0x125));errors['length']>0x0?console['log'](_0x2db2db(0x16d),errors):console[_0x2db2db(0x15e)]('‚úÖ\x20Update\x20completed\x20successfully!');await cleanup(),console[_0x2db2db(0x15e)]('üîÑ\x20Restarting\x20bot...');const _0x1596a7=spawn(_0x2db2db(0x140),['index.js'],{'detached':!![],'stdio':_0x2db2db(0x142),'cwd':config[_0x2db2db(0x164)][_0x2db2db(0x13b)]});_0x1596a7[_0x2db2db(0x141)](),process['exit'](0x0);}else console[_0x2db2db(0x15e)](_0x2db2db(0x15d));}catch(_0x1971ec){console[_0x2db2db(0x12f)](_0x2db2db(0x126),_0x1971ec),await cleanup();}}function a0_0x4887(){const _0x1161f0=['üîÑ\x20Restarting\x20bot...','Failed\x20to\x20remove\x20','session','set','current','catch','8862JicyGb','198308cNhiFf','.env','Cleanup\x20error:','sendMessage','‚úì\x20Files\x20merged','Auto-update\x20error:','semver','axios','extname','Invalid\x20version\x20number\x20received\x20from\x20GitHub','File\x20sync\x20error:','config.js','27hsiwXM','Download/extraction\x20failed:\x20','error','tag_name','10KonIJt','unlink','readdir','adm-zip','Update\x20error:','github','üîÑ\x20New\x20update\x20found!\x20(','writeFile','push','access','root','some','temp','node_modules','toLowerCase','node','unref','ignore','Bot','isDirectory','25fkcgMW','latest','bot-update.zip','Updates\x20the\x20bot\x20files\x20from\x20the\x20upstream\x20GitHub\x20repository.','Session','Removed:\x20','/releases/latest','utf-8','‚úÖ\x20Already\x20on\x20latest\x20version!','resolve','remoteJid','\x20|\x20Latest:\x20','message','replace','name','https://api.github.com/repos/','get','data','Note:\x20Could\x20not\x20remove\x20','1775928bBoDRw','extractAllToAsync','‚ö†Ô∏è\x20Update\x20completed\x20with\x20some\x20errors.\x20Check\x20logs\x20for\x20details.','Download/extract\x20error:','zip','‚úì\x20Bot\x20is\x20on\x20the\x20latest\x20version','log','245LWOfhp','relative','1778928zSZfQj','normalize','597820lYDctE','paths','promises','mkdir','‚úì\x20Files\x20downloaded\x20and\x20extracted','123486dYrWyQ','valid','Update\x20process\x20failed:\x20','all','‚úÖ\x20Update\x20completed\x20successfully!','‚ö†Ô∏è\x20Update\x20completed\x20with\x20some\x20errors:','Current:\x20','Error\x20copying\x20','1084641tVJSLc','path','length','owner','Kord-Ai','downloadUrl','Skipping\x20protected\x20directory\x20removal:\x20','protected','package-lock.json','Error\x20getting\x20versions:','readFile','Extraction\x20failed:\x20','temp_update','zipball_url','startsWith','join','üîÑ\x20New\x20update\x20found!\x20Starting\x20auto-update...','Update\x20process\x20error:','key'];a0_0x4887=function(){return _0x1161f0;};return a0_0x4887();}async function updateBot(_0x3d519c,_0x2403a5){const _0x5a4e91=a0_0x1e578b;try{await _0x3d519c['sendMessage'](_0x2403a5[_0x5a4e91(0x119)][_0x5a4e91(0x14f)],{'text':'üîÑ\x20Checking\x20for\x20updates...'},{'quoted':_0x2403a5}),await ensureDir(config['paths'][_0x5a4e91(0x13d)]);const _0x2c274f=await getVersions();console[_0x5a4e91(0x15e)](_0x5a4e91(0x16e)+_0x2c274f[_0x5a4e91(0x11e)]+_0x5a4e91(0x150)+_0x2c274f[_0x5a4e91(0x146)]);if(!_0x2c274f['latest']||!semver[_0x5a4e91(0x169)](_0x2c274f[_0x5a4e91(0x146)]))throw new Error(_0x5a4e91(0x12a));if(semver['gt'](_0x2c274f[_0x5a4e91(0x146)],_0x2c274f[_0x5a4e91(0x11e)])){await _0x3d519c[_0x5a4e91(0x124)](_0x2403a5['key'][_0x5a4e91(0x14f)],{'text':_0x5a4e91(0x137)+_0x2c274f['current']+'\x20‚Üí\x20'+_0x2c274f[_0x5a4e91(0x146)]+')'},{'quoted':_0x2403a5}),await downloadAndExtract(_0x2c274f[_0x5a4e91(0x175)]),console[_0x5a4e91(0x15e)]('‚úì\x20Files\x20downloaded\x20and\x20extracted'),await _0x3d519c['sendMessage'](_0x2403a5['key'][_0x5a4e91(0x14f)],{'text':'üì¶\x20Installing\x20updates...'},{'quoted':_0x2403a5});const {updates:updates=[],errors:errors=[]}=await performUpdate();console[_0x5a4e91(0x15e)](_0x5a4e91(0x125));errors[_0x5a4e91(0x172)]>0x0?await _0x3d519c[_0x5a4e91(0x124)](_0x2403a5[_0x5a4e91(0x119)][_0x5a4e91(0x14f)],{'text':_0x5a4e91(0x15a)},{'quoted':_0x2403a5}):await _0x3d519c['sendMessage'](_0x2403a5[_0x5a4e91(0x119)][_0x5a4e91(0x14f)],{'text':_0x5a4e91(0x16c)},{'quoted':_0x2403a5});await cleanup(),await _0x3d519c[_0x5a4e91(0x124)](_0x2403a5[_0x5a4e91(0x119)][_0x5a4e91(0x14f)],{'text':_0x5a4e91(0x11a)},{'quoted':_0x2403a5});const _0x509ea9=spawn('node',['index.js'],{'detached':!![],'stdio':'ignore','cwd':config[_0x5a4e91(0x164)][_0x5a4e91(0x13b)]});_0x509ea9[_0x5a4e91(0x141)](),process['exit'](0x0);}else await _0x3d519c['sendMessage'](_0x2403a5[_0x5a4e91(0x119)][_0x5a4e91(0x14f)],{'text':_0x5a4e91(0x14d)},{'quoted':_0x2403a5});}catch(_0x21a6c9){console[_0x5a4e91(0x12f)](_0x5a4e91(0x135),_0x21a6c9),await _0x3d519c[_0x5a4e91(0x124)](_0x2403a5[_0x5a4e91(0x119)][_0x5a4e91(0x14f)],{'text':'‚ùå\x20Update\x20failed:\x20'+_0x21a6c9['message']},{'quoted':_0x2403a5}),await cleanup();}}module['exports']={'usage':['update'],'desc':a0_0x1e578b(0x148),'commandType':a0_0x1e578b(0x143),'isGroupOnly':![],'isAdminOnly':![],'isPrivateOnly':![],'isOwnerOnly':!![],'emoji':'‚öôÔ∏è','execute':updateBot,'checkAndAutoUpdate':checkAndAutoUpdate};