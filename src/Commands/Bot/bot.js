const a0_0x4e9cb0=a0_0x477f;(function(_0x16e51b,_0x29c9db){const _0x14ab8b=a0_0x477f,_0x4c5c6d=_0x16e51b();while(!![]){try{const _0x38a044=-parseInt(_0x14ab8b(0x19d))/0x1*(-parseInt(_0x14ab8b(0x17c))/0x2)+-parseInt(_0x14ab8b(0x199))/0x3*(parseInt(_0x14ab8b(0x16d))/0x4)+parseInt(_0x14ab8b(0x176))/0x5*(-parseInt(_0x14ab8b(0x173))/0x6)+-parseInt(_0x14ab8b(0x19a))/0x7*(-parseInt(_0x14ab8b(0x197))/0x8)+-parseInt(_0x14ab8b(0x175))/0x9+parseInt(_0x14ab8b(0x186))/0xa*(parseInt(_0x14ab8b(0x161))/0xb)+parseInt(_0x14ab8b(0x177))/0xc;if(_0x38a044===_0x29c9db)break;else _0x4c5c6d['push'](_0x4c5c6d['shift']());}catch(_0x2257e4){_0x4c5c6d['push'](_0x4c5c6d['shift']());}}}(a0_0x2bd6,0x3c0fd));const fs=require('fs')[a0_0x4e9cb0(0x166)],path=require(a0_0x4e9cb0(0x18f)),{Mistral}=require(a0_0x4e9cb0(0x160)),emojis={'loading':'⏳','success':'✨','error':'❌'},configPath=path[a0_0x4e9cb0(0x181)](__dirname,'..','..',a0_0x4e9cb0(0x192),a0_0x4e9cb0(0x17f));let messageListener=null,activeChats=new Set(),chatHistory=new Map();const mistralClient=new Mistral({'apiKey':'AA46jQW0VLsz2x7FW7sCUnBVIpBaa1qW'}),AGENT_CONFIG={'agentId':'ag:4151fcb9:20250104:untitled-agent:d1bde2e5'};function sanitizeMessage(_0x59e58f){const _0x1a15c6=a0_0x4e9cb0;if(typeof _0x59e58f!==_0x1a15c6(0x16e))return'';return _0x59e58f[_0x1a15c6(0x193)]();}async function getAIResponse(_0x20c9de,_0x5411f3){const _0x4ca599=a0_0x4e9cb0,_0x1bcbe1=sanitizeMessage(_0x20c9de);if(!_0x1bcbe1)throw new Error(_0x4ca599(0x18d));try{!chatHistory[_0x4ca599(0x169)](_0x5411f3)&&chatHistory[_0x4ca599(0x18a)](_0x5411f3,[]);const _0x5057b4=chatHistory[_0x4ca599(0x17d)](_0x5411f3);_0x5057b4['push']({'role':'user','content':String(_0x1bcbe1)});while(_0x5057b4[_0x4ca599(0x163)]>0xa){_0x5057b4['shift']();}const _0x3319ff=await mistralClient[_0x4ca599(0x194)][_0x4ca599(0x198)]({'agentId':AGENT_CONFIG[_0x4ca599(0x183)],'messages':_0x5057b4});if(!_0x3319ff?.[_0x4ca599(0x172)]?.[0x0]?.['message']?.['content'])throw new Error('Invalid\x20response\x20format\x20from\x20Mistral\x20AI');return _0x5057b4[_0x4ca599(0x188)]({'role':_0x4ca599(0x16a),'content':_0x3319ff['choices'][0x0][_0x4ca599(0x16b)][_0x4ca599(0x164)]}),_0x3319ff[_0x4ca599(0x172)][0x0]['message']['content'];}catch(_0x4b5476){console[_0x4ca599(0x190)](_0x4ca599(0x18c),_0x4b5476),chatHistory[_0x4ca599(0x19c)](_0x5411f3);throw new Error(_0x4ca599(0x182)+_0x4b5476[_0x4ca599(0x16b)]);}}module['exports']={'usage':[a0_0x4e9cb0(0x174)],'desc':'Chat\x20With\x20Mistral\x20AI\x20Bot','commandType':a0_0x4e9cb0(0x15e),'isGroupOnly':![],'isAdminOnly':![],'isPrivateOnly':![],'emoji':'✨',async 'execute'(_0x4fa697,_0x3be5bb,_0x390f48){const _0x373c03=a0_0x4e9cb0,_0xd26ade=_0x3be5bb[_0x373c03(0x19b)][_0x373c03(0x18e)],_0x484abf=_0x3a3b8d=>{const _0x1d8ed2=_0x373c03;return _0x4fa697[_0x1d8ed2(0x189)](_0xd26ade,{'text':_0x3a3b8d});};if(_0x390f48[0x0]==='on'){if(activeChats['has'](_0xd26ade))return _0x484abf(_0x373c03(0x15a));return activeChats[_0x373c03(0x170)](_0xd26ade),chatHistory[_0x373c03(0x18a)](_0xd26ade,[]),await this['updateConfig'](_0xd26ade,!![]),!messageListener&&this[_0x373c03(0x15c)](_0x4fa697),_0x484abf(_0x373c03(0x15f));}else{if(_0x390f48[0x0]==='off'){if(!activeChats[_0x373c03(0x169)](_0xd26ade))return _0x484abf(_0x373c03(0x179));return activeChats['delete'](_0xd26ade),chatHistory['delete'](_0xd26ade),await this[_0x373c03(0x195)](_0xd26ade,![]),activeChats[_0x373c03(0x196)]===0x0&&messageListener&&(_0x4fa697['ev'][_0x373c03(0x185)](_0x373c03(0x191),messageListener),messageListener=null),_0x484abf(_0x373c03(0x17e));}else return _0x484abf('❌\x20Usage:\x20.chatbot\x20on/off');}},async 'updateConfig'(_0x4c6051,_0xab9532){const _0x3f2b3f=a0_0x4e9cb0;try{let _0x29f1fe={};_0xab9532&&(_0x29f1fe[_0x4c6051]=!![]),await fs[_0x3f2b3f(0x15d)](configPath,JSON[_0x3f2b3f(0x167)](_0x29f1fe,null,0x2));}catch(_0x23feb0){console[_0x3f2b3f(0x190)]('Error\x20updating\x20config:',_0x23feb0);throw new Error('Failed\x20to\x20update\x20configuration');}},'startListening'(_0x29d3d3){messageListener=async({messages:_0x2345a5})=>{const _0x4ca72d=a0_0x477f;for(const _0x427018 of _0x2345a5){if(!_0x427018?.[_0x4ca72d(0x19b)]?.[_0x4ca72d(0x18e)]||!activeChats[_0x4ca72d(0x169)](_0x427018[_0x4ca72d(0x19b)][_0x4ca72d(0x18e)]))continue;const _0x2d36ae=_0x427018[_0x4ca72d(0x19b)][_0x4ca72d(0x18e)],_0x5749ed=_0x427018['message']?.[_0x4ca72d(0x180)]||_0x427018[_0x4ca72d(0x16b)]?.[_0x4ca72d(0x15b)]?.[_0x4ca72d(0x171)]||'';if(!_0x5749ed||_0x427018[_0x4ca72d(0x19b)][_0x4ca72d(0x18b)])continue;try{await _0x29d3d3[_0x4ca72d(0x184)](_0x4ca72d(0x16c),_0x2d36ae),await _0x29d3d3[_0x4ca72d(0x189)](_0x2d36ae,{'react':{'key':_0x427018['key'],'emoji':emojis[_0x4ca72d(0x17b)]}});const _0x5d7f96=await getAIResponse(_0x5749ed,_0x2d36ae);await _0x29d3d3[_0x4ca72d(0x189)](_0x2d36ae,{'react':{'key':_0x427018[_0x4ca72d(0x19b)],'emoji':emojis[_0x4ca72d(0x16f)]}}),await _0x29d3d3[_0x4ca72d(0x189)](_0x2d36ae,{'text':_0x5d7f96,'contextInfo':{'quotedMessage':_0x427018[_0x4ca72d(0x16b)]}});}catch(_0x1f8160){console[_0x4ca72d(0x190)](_0x4ca72d(0x168),_0x1f8160),await _0x29d3d3[_0x4ca72d(0x189)](_0x2d36ae,{'react':{'key':_0x427018[_0x4ca72d(0x19b)],'emoji':emojis[_0x4ca72d(0x190)]}}),await _0x29d3d3[_0x4ca72d(0x189)](_0x2d36ae,{'text':_0x4ca72d(0x17a)+_0x1f8160[_0x4ca72d(0x16b)]});}finally{await _0x29d3d3['sendPresenceUpdate'](_0x4ca72d(0x165),_0x2d36ae);}}},_0x29d3d3['ev']['on']('messages.upsert',messageListener);},async 'init'(_0x3acfd0){const _0x3bff97=a0_0x4e9cb0;try{await fs[_0x3bff97(0x15d)](configPath,'{}',_0x3bff97(0x178)),activeChats[_0x3bff97(0x162)](),chatHistory[_0x3bff97(0x162)](),messageListener&&(_0x3acfd0['ev'][_0x3bff97(0x185)]('messages.upsert',messageListener),messageListener=null);}catch(_0x33dc93){console[_0x3bff97(0x190)](_0x3bff97(0x187),_0x33dc93);}}};function a0_0x477f(_0x24c39b,_0x5e41f1){const _0x2bd6f5=a0_0x2bd6();return a0_0x477f=function(_0x477fdd,_0x30e8ef){_0x477fdd=_0x477fdd-0x15a;let _0x71d8d7=_0x2bd6f5[_0x477fdd];return _0x71d8d7;},a0_0x477f(_0x24c39b,_0x5e41f1);}function a0_0x2bd6(){const _0x510496=['Failed\x20to\x20get\x20AI\x20response:\x20','agentId','sendPresenceUpdate','off','315480yVAOAr','Error\x20initializing\x20chatbot:','push','sendMessage','set','fromMe','Mistral\x20API\x20error:','Empty\x20message','remoteJid','path','error','messages.upsert','Database','trim','agents','updateConfig','size','8GECpHA','complete','1027554hzAzSV','2369339pApvgY','key','delete','149789ccuMWp','⚠️\x20Chatbot\x20is\x20already\x20active\x20in\x20this\x20chat!','extendedTextMessage','startListening','writeFile','Bot','✅\x20Mistral\x20AI\x20Chatbot\x20activated!\x20You\x20can\x20now\x20chat\x20with\x20me.','@mistralai/mistralai','33DGDQqe','clear','length','content','paused','promises','stringify','Chatbot\x20error:','has','assistant','message','composing','4SAVmaE','string','success','add','text','choices','2334cUXIuM','chatbot','857754XupEdK','4750WWloLN','3848256XsAteU','utf8','⚠️\x20Chatbot\x20is\x20already\x20inactive\x20in\x20this\x20chat!','❌\x20Sorry,\x20I\x20encountered\x20an\x20error:\x20','loading','4IOMtjJ','get','✅\x20Chatbot\x20has\x20been\x20deactivated.','chatbot_config.json','conversation','join'];a0_0x2bd6=function(){return _0x510496;};return a0_0x2bd6();}