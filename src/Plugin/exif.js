function a0_0x2321(_0x1c3eff,_0x33d0d6){const _0x104d3d=a0_0x104d();return a0_0x2321=function(_0x232115,_0x230d74){_0x232115=_0x232115-0x195;let _0x326ac1=_0x104d3d[_0x232115];return _0x326ac1;},a0_0x2321(_0x1c3eff,_0x33d0d6);}const a0_0x314b1d=a0_0x2321;(function(_0xcadaa4,_0xa2c9ea){const _0x5a0c88=a0_0x2321,_0x10fa74=_0xcadaa4();while(!![]){try{const _0x156d0f=parseInt(_0x5a0c88(0x19c))/0x1+parseInt(_0x5a0c88(0x1b1))/0x2+-parseInt(_0x5a0c88(0x1bc))/0x3+parseInt(_0x5a0c88(0x1af))/0x4*(-parseInt(_0x5a0c88(0x1bf))/0x5)+parseInt(_0x5a0c88(0x1c5))/0x6*(-parseInt(_0x5a0c88(0x1ad))/0x7)+-parseInt(_0x5a0c88(0x197))/0x8+-parseInt(_0x5a0c88(0x1be))/0x9*(-parseInt(_0x5a0c88(0x1c0))/0xa);if(_0x156d0f===_0xa2c9ea)break;else _0x10fa74['push'](_0x10fa74['shift']());}catch(_0x1eb26d){_0x10fa74['push'](_0x10fa74['shift']());}}}(a0_0x104d,0x3851d));const fs=require('fs'),{tmpdir}=require('os'),Crypto=require(a0_0x314b1d(0x1a7)),ff=require(a0_0x314b1d(0x1cc)),ffmpegPath=require(a0_0x314b1d(0x1b5))[a0_0x314b1d(0x1bb)],webp=require('node-webpmux'),path=require('path');ff['setFfmpegPath'](ffmpegPath);async function imageToWebp(_0x2662ec){const _0x44b679=a0_0x314b1d,_0x1e3f7b=path[_0x44b679(0x1ae)](tmpdir(),Crypto[_0x44b679(0x1b3)](0x6)[_0x44b679(0x1c1)](0x0,0x6)[_0x44b679(0x1cb)](0x24)+'.webp'),_0x1bfa51=path['join'](tmpdir(),Crypto['randomBytes'](0x6)[_0x44b679(0x1c1)](0x0,0x6)[_0x44b679(0x1cb)](0x24)+_0x44b679(0x19f));fs[_0x44b679(0x1b9)](_0x1bfa51,_0x2662ec),await new Promise((_0x373f52,_0x23593d)=>{const _0x474e72=_0x44b679;ff(_0x1bfa51)['on'](_0x474e72(0x1a5),_0x23593d)['on'](_0x474e72(0x1ab),()=>_0x373f52(!![]))[_0x474e72(0x195)](['-vcodec',_0x474e72(0x1c9),_0x474e72(0x1a6),_0x474e72(0x1c8)])[_0x474e72(0x1a1)](_0x474e72(0x198))[_0x474e72(0x1a3)](_0x1e3f7b);});const _0xe58e07=fs['readFileSync'](_0x1e3f7b);return fs[_0x44b679(0x1b4)](_0x1e3f7b),fs[_0x44b679(0x1b4)](_0x1bfa51),_0xe58e07;}async function videoToWebp(_0x43e8f1){const _0x5958ff=a0_0x314b1d,_0x5a46a1=path[_0x5958ff(0x1ae)](tmpdir(),Crypto['randomBytes'](0x6)[_0x5958ff(0x1c1)](0x0,0x6)[_0x5958ff(0x1cb)](0x24)+_0x5958ff(0x1c4)),_0x5228c1=path['join'](tmpdir(),Crypto[_0x5958ff(0x1b3)](0x6)[_0x5958ff(0x1c1)](0x0,0x6)[_0x5958ff(0x1cb)](0x24)+_0x5958ff(0x1b6));fs[_0x5958ff(0x1b9)](_0x5228c1,_0x43e8f1),await new Promise((_0x34d471,_0x21d086)=>{const _0x1fbace=_0x5958ff;ff(_0x5228c1)['on'](_0x1fbace(0x1a5),_0x21d086)['on']('end',()=>_0x34d471(!![]))[_0x1fbace(0x195)](['-vcodec',_0x1fbace(0x1c9),_0x1fbace(0x1a6),_0x1fbace(0x1c8),'-loop','0',_0x1fbace(0x1a4),'00:00:00','-t',_0x1fbace(0x1c3),_0x1fbace(0x19b),_0x1fbace(0x1b8),'-an',_0x1fbace(0x1b0),'0'])[_0x1fbace(0x1a1)](_0x1fbace(0x198))['save'](_0x5a46a1);});const _0x53ddd8=fs[_0x5958ff(0x1b7)](_0x5a46a1);return fs[_0x5958ff(0x1b4)](_0x5a46a1),fs[_0x5958ff(0x1b4)](_0x5228c1),_0x53ddd8;}async function writeExifImg(_0xaba58e,_0x5a2f92){const _0x47ad00=a0_0x314b1d;let _0x2654a5=await imageToWebp(_0xaba58e);const _0x34d788=path[_0x47ad00(0x1ae)](tmpdir(),Crypto[_0x47ad00(0x1b3)](0x6)[_0x47ad00(0x1c1)](0x0,0x6)[_0x47ad00(0x1cb)](0x24)+_0x47ad00(0x1c4)),_0x521160=path['join'](tmpdir(),Crypto[_0x47ad00(0x1b3)](0x6)['readUIntLE'](0x0,0x6)[_0x47ad00(0x1cb)](0x24)+_0x47ad00(0x1c4));fs[_0x47ad00(0x1b9)](_0x34d788,_0x2654a5);if(_0x5a2f92['packname']||_0x5a2f92[_0x47ad00(0x1c2)]){const _0x5efa97=new webp['Image'](),_0x10eff3={'sticker-pack-id':_0x47ad00(0x196),'sticker-pack-name':_0x5a2f92['packname'],'sticker-pack-publisher':_0x5a2f92[_0x47ad00(0x1c2)],'emojis':_0x5a2f92[_0x47ad00(0x199)]?_0x5a2f92['categories']:['']},_0x8e5fae=Buffer[_0x47ad00(0x19e)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x1ea635=Buffer[_0x47ad00(0x19e)](JSON['stringify'](_0x10eff3),'utf-8'),_0x3f5ea0=Buffer[_0x47ad00(0x1bd)]([_0x8e5fae,_0x1ea635]);return _0x3f5ea0['writeUIntLE'](_0x1ea635[_0x47ad00(0x1ca)],0xe,0x4),await _0x5efa97[_0x47ad00(0x1c7)](_0x34d788),fs[_0x47ad00(0x1b4)](_0x34d788),_0x5efa97[_0x47ad00(0x1ac)]=_0x3f5ea0,await _0x5efa97['save'](_0x521160),_0x521160;}}async function writeExifVid(_0x4b6c69,_0x58dfec){const _0x45e238=a0_0x314b1d;let _0x5a8c82=await videoToWebp(_0x4b6c69);const _0xaabea7=path[_0x45e238(0x1ae)](tmpdir(),Crypto['randomBytes'](0x6)[_0x45e238(0x1c1)](0x0,0x6)[_0x45e238(0x1cb)](0x24)+_0x45e238(0x1c4)),_0x2623bb=path[_0x45e238(0x1ae)](tmpdir(),Crypto[_0x45e238(0x1b3)](0x6)[_0x45e238(0x1c1)](0x0,0x6)[_0x45e238(0x1cb)](0x24)+_0x45e238(0x1c4));fs['writeFileSync'](_0xaabea7,_0x5a8c82);if(_0x58dfec['packname']||_0x58dfec[_0x45e238(0x1c2)]){const _0x43fed2=new webp['Image'](),_0x8b4a84={'sticker-pack-id':_0x45e238(0x196),'sticker-pack-name':_0x58dfec[_0x45e238(0x19a)],'sticker-pack-publisher':_0x58dfec[_0x45e238(0x1c2)],'emojis':_0x58dfec['categories']?_0x58dfec[_0x45e238(0x199)]:['']},_0x290a20=Buffer[_0x45e238(0x19e)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x4d6399=Buffer[_0x45e238(0x19e)](JSON[_0x45e238(0x1ba)](_0x8b4a84),_0x45e238(0x1a9)),_0x2fd6a7=Buffer[_0x45e238(0x1bd)]([_0x290a20,_0x4d6399]);return _0x2fd6a7[_0x45e238(0x1cd)](_0x4d6399[_0x45e238(0x1ca)],0xe,0x4),await _0x43fed2[_0x45e238(0x1c7)](_0xaabea7),fs[_0x45e238(0x1b4)](_0xaabea7),_0x43fed2[_0x45e238(0x1ac)]=_0x2fd6a7,await _0x43fed2[_0x45e238(0x1a3)](_0x2623bb),_0x2623bb;}}async function writeExif(_0x3461c8,_0x3c47d6){const _0x4e5aac=a0_0x314b1d;let _0x1a33d3=/webp/[_0x4e5aac(0x1a8)](_0x3461c8['mimetype'])?_0x3461c8[_0x4e5aac(0x1c6)]:/image/['test'](_0x3461c8[_0x4e5aac(0x1b2)])?await imageToWebp(_0x3461c8[_0x4e5aac(0x1c6)]):/video/[_0x4e5aac(0x1a8)](_0x3461c8[_0x4e5aac(0x1b2)])?await videoToWebp(_0x3461c8[_0x4e5aac(0x1c6)]):'';const _0x27b182=path[_0x4e5aac(0x1ae)](tmpdir(),Crypto[_0x4e5aac(0x1b3)](0x6)[_0x4e5aac(0x1c1)](0x0,0x6)[_0x4e5aac(0x1cb)](0x24)+_0x4e5aac(0x1c4)),_0x37c9d4=path[_0x4e5aac(0x1ae)](tmpdir(),Crypto[_0x4e5aac(0x1b3)](0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+_0x4e5aac(0x1c4));fs[_0x4e5aac(0x1b9)](_0x27b182,_0x1a33d3);if(_0x3c47d6[_0x4e5aac(0x19a)]||_0x3c47d6[_0x4e5aac(0x1c2)]){const _0x36f853=new webp[(_0x4e5aac(0x1cf))](),_0x1c1694={'sticker-pack-id':_0x4e5aac(0x196),'sticker-pack-name':_0x3c47d6['packname'],'sticker-pack-publisher':_0x3c47d6['author'],'emojis':_0x3c47d6[_0x4e5aac(0x199)]?_0x3c47d6[_0x4e5aac(0x199)]:['']},_0x1b7dae=Buffer[_0x4e5aac(0x19e)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x206bdd=Buffer[_0x4e5aac(0x19e)](JSON['stringify'](_0x1c1694),_0x4e5aac(0x1a9)),_0x11efda=Buffer[_0x4e5aac(0x1bd)]([_0x1b7dae,_0x206bdd]);return _0x11efda['writeUIntLE'](_0x206bdd[_0x4e5aac(0x1ca)],0xe,0x4),await _0x36f853[_0x4e5aac(0x1c7)](_0x27b182),fs['unlinkSync'](_0x27b182),_0x36f853[_0x4e5aac(0x1ac)]=_0x11efda,await _0x36f853[_0x4e5aac(0x1a3)](_0x37c9d4),_0x37c9d4;}}function a0_0x104d(){const _0x445c0f=['Image','addOutputOptions','https://github.com/DGXeon','2459240kxqBqB','webp','categories','packname','-preset','231806uMNXJd','utf8','from','.jpg','node-webpmux','toFormat','exports','save','-ss','error','-vf','crypto','test','utf-8','DGXeon','end','exif','1246GEgjHg','join','4yesgpo','-vsync','725368OyXdWn','mimetype','randomBytes','unlinkSync','@ffmpeg-installer/ffmpeg','.mp4','readFileSync','default','writeFileSync','stringify','path','1301379jbAojF','concat','173322VulbWJ','523295swRzIV','270hTaDWg','readUIntLE','author','00:00:05','.webp','1278VDuiWM','data','load','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','libwebp','length','toString','fluent-ffmpeg','writeUIntLE','util'];a0_0x104d=function(){return _0x445c0f;};return a0_0x104d();}const {Image}=require(a0_0x314b1d(0x1a0)),{format}=require(a0_0x314b1d(0x1ce));async function addExif(_0x2a8c0a,_0x113669,_0x21362f,_0x178321=[''],_0x478328={}){const _0x450ac8=a0_0x314b1d,_0x2adf5c=new Image(),_0xbeefe={'sticker-pack-id':_0x450ac8(0x1aa),'sticker-pack-name':_0x113669,'sticker-pack-publisher':_0x21362f,'emojis':_0x178321,'is-avatar-sticker':0x1,..._0x478328};let _0x2aed61=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x537b7e=Buffer[_0x450ac8(0x19e)](JSON['stringify'](_0xbeefe),_0x450ac8(0x19d)),_0x7d1dd1=Buffer[_0x450ac8(0x1bd)]([_0x2aed61,_0x537b7e]);return _0x7d1dd1['writeUIntLE'](_0x537b7e[_0x450ac8(0x1ca)],0xe,0x4),await _0x2adf5c[_0x450ac8(0x1c7)](_0x2a8c0a),_0x2adf5c[_0x450ac8(0x1ac)]=_0x7d1dd1,await _0x2adf5c[_0x450ac8(0x1a3)](null);}module[a0_0x314b1d(0x1a2)]={'addExif':addExif,'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif};