function a0_0x2490(_0x1beb88,_0x397c05){const _0x1906d8=a0_0x1906();return a0_0x2490=function(_0x2490c6,_0x38e160){_0x2490c6=_0x2490c6-0x172;let _0x3dad9f=_0x1906d8[_0x2490c6];return _0x3dad9f;},a0_0x2490(_0x1beb88,_0x397c05);}const a0_0x25ad63=a0_0x2490;(function(_0x59cac9,_0x2aab43){const _0x51a1df=a0_0x2490,_0x54430f=_0x59cac9();while(!![]){try{const _0x4d2466=-parseInt(_0x51a1df(0x17b))/0x1+parseInt(_0x51a1df(0x197))/0x2+parseInt(_0x51a1df(0x180))/0x3*(-parseInt(_0x51a1df(0x1a5))/0x4)+-parseInt(_0x51a1df(0x191))/0x5+parseInt(_0x51a1df(0x198))/0x6+parseInt(_0x51a1df(0x1a8))/0x7+parseInt(_0x51a1df(0x185))/0x8*(parseInt(_0x51a1df(0x199))/0x9);if(_0x4d2466===_0x2aab43)break;else _0x54430f['push'](_0x54430f['shift']());}catch(_0x168dc2){_0x54430f['push'](_0x54430f['shift']());}}}(a0_0x1906,0xa178e));const fs=require('fs'),{tmpdir}=require('os'),Crypto=require(a0_0x25ad63(0x17d)),ff=require(a0_0x25ad63(0x18a)),ffmpegPath=require(a0_0x25ad63(0x176))[a0_0x25ad63(0x184)],webp=require(a0_0x25ad63(0x189)),path=require(a0_0x25ad63(0x184));ff[a0_0x25ad63(0x19b)](ffmpegPath);async function imageToWebp(_0x3ae6ca){const _0x33afc2=a0_0x25ad63,_0x458730=path['join'](tmpdir(),Crypto[_0x33afc2(0x1aa)](0x6)[_0x33afc2(0x1a0)](0x0,0x6)[_0x33afc2(0x19e)](0x24)+_0x33afc2(0x18c)),_0x393110=path['join'](tmpdir(),Crypto['randomBytes'](0x6)['readUIntLE'](0x0,0x6)[_0x33afc2(0x19e)](0x24)+_0x33afc2(0x17e));fs[_0x33afc2(0x188)](_0x393110,_0x3ae6ca),await new Promise((_0x3101bf,_0x394850)=>{const _0x3a5b33=_0x33afc2;ff(_0x393110)['on']('error',_0x394850)['on'](_0x3a5b33(0x181),()=>_0x3101bf(!![]))['addOutputOptions'](['-vcodec','libwebp',_0x3a5b33(0x19d),_0x3a5b33(0x178)])[_0x3a5b33(0x190)]('webp')['save'](_0x458730);});const _0x564ef5=fs[_0x33afc2(0x182)](_0x458730);return fs[_0x33afc2(0x187)](_0x458730),fs[_0x33afc2(0x187)](_0x393110),_0x564ef5;}function a0_0x1906(){const _0x2ae210=['unlinkSync','writeFileSync','node-webpmux','fluent-ffmpeg','-ss','.webp','00:00:00','utf-8','from','toFormat','408355Fwkihe','DGXeon','-preset','.mp4','load','exif','2328004UrTZNT','3057336FSaytf','18XztGXw','packname','setFfmpegPath','util','-vf','toString','00:00:05','readUIntLE','https://github.com/DGXeon','save','-loop','author','48CTORAK','Image','length','4425001EBvLmp','-an','randomBytes','concat','join','test','data','libwebp','@ffmpeg-installer/ffmpeg','categories','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','writeUIntLE','stringify','879184KHiGGK','utf8','crypto','.jpg','error','266673YHOCmz','end','readFileSync','default','path','1532944gqvRIB','mimetype'];a0_0x1906=function(){return _0x2ae210;};return a0_0x1906();}async function videoToWebp(_0x2efa42){const _0x44ede4=a0_0x25ad63,_0x244216=path['join'](tmpdir(),Crypto[_0x44ede4(0x1aa)](0x6)[_0x44ede4(0x1a0)](0x0,0x6)[_0x44ede4(0x19e)](0x24)+'.webp'),_0x1411e1=path['join'](tmpdir(),Crypto['randomBytes'](0x6)['readUIntLE'](0x0,0x6)[_0x44ede4(0x19e)](0x24)+_0x44ede4(0x194));fs[_0x44ede4(0x188)](_0x1411e1,_0x2efa42),await new Promise((_0x2ca499,_0x16f589)=>{const _0x50c4ed=_0x44ede4;ff(_0x1411e1)['on'](_0x50c4ed(0x17f),_0x16f589)['on'](_0x50c4ed(0x181),()=>_0x2ca499(!![]))['addOutputOptions'](['-vcodec',_0x50c4ed(0x175),_0x50c4ed(0x19d),_0x50c4ed(0x178),_0x50c4ed(0x1a3),'0',_0x50c4ed(0x18b),_0x50c4ed(0x18d),'-t',_0x50c4ed(0x19f),_0x50c4ed(0x193),_0x50c4ed(0x183),_0x50c4ed(0x1a9),'-vsync','0'])[_0x50c4ed(0x190)]('webp')['save'](_0x244216);});const _0x457d0b=fs[_0x44ede4(0x182)](_0x244216);return fs[_0x44ede4(0x187)](_0x244216),fs['unlinkSync'](_0x1411e1),_0x457d0b;}async function writeExifImg(_0x190cfc,_0x43d8aa){const _0x4963a7=a0_0x25ad63;let _0x3fcb14=await imageToWebp(_0x190cfc);const _0x2c71e4=path[_0x4963a7(0x172)](tmpdir(),Crypto[_0x4963a7(0x1aa)](0x6)[_0x4963a7(0x1a0)](0x0,0x6)[_0x4963a7(0x19e)](0x24)+_0x4963a7(0x18c)),_0x2165fd=path[_0x4963a7(0x172)](tmpdir(),Crypto[_0x4963a7(0x1aa)](0x6)[_0x4963a7(0x1a0)](0x0,0x6)[_0x4963a7(0x19e)](0x24)+_0x4963a7(0x18c));fs['writeFileSync'](_0x2c71e4,_0x3fcb14);if(_0x43d8aa['packname']||_0x43d8aa[_0x4963a7(0x1a4)]){const _0x58c155=new webp[(_0x4963a7(0x1a6))](),_0x224407={'sticker-pack-id':_0x4963a7(0x1a1),'sticker-pack-name':_0x43d8aa[_0x4963a7(0x19a)],'sticker-pack-publisher':_0x43d8aa[_0x4963a7(0x1a4)],'emojis':_0x43d8aa[_0x4963a7(0x177)]?_0x43d8aa[_0x4963a7(0x177)]:['']},_0x212015=Buffer[_0x4963a7(0x18f)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x12dbcf=Buffer[_0x4963a7(0x18f)](JSON[_0x4963a7(0x17a)](_0x224407),_0x4963a7(0x18e)),_0x47ee62=Buffer[_0x4963a7(0x1ab)]([_0x212015,_0x12dbcf]);return _0x47ee62[_0x4963a7(0x179)](_0x12dbcf[_0x4963a7(0x1a7)],0xe,0x4),await _0x58c155['load'](_0x2c71e4),fs[_0x4963a7(0x187)](_0x2c71e4),_0x58c155[_0x4963a7(0x196)]=_0x47ee62,await _0x58c155['save'](_0x2165fd),_0x2165fd;}}async function writeExifVid(_0xeb186f,_0x507542){const _0x103224=a0_0x25ad63;let _0x2958ee=await videoToWebp(_0xeb186f);const _0x4822fa=path[_0x103224(0x172)](tmpdir(),Crypto[_0x103224(0x1aa)](0x6)[_0x103224(0x1a0)](0x0,0x6)['toString'](0x24)+_0x103224(0x18c)),_0x4e59a1=path[_0x103224(0x172)](tmpdir(),Crypto[_0x103224(0x1aa)](0x6)[_0x103224(0x1a0)](0x0,0x6)[_0x103224(0x19e)](0x24)+_0x103224(0x18c));fs['writeFileSync'](_0x4822fa,_0x2958ee);if(_0x507542[_0x103224(0x19a)]||_0x507542[_0x103224(0x1a4)]){const _0x4aea1f=new webp[(_0x103224(0x1a6))](),_0x1ca0b4={'sticker-pack-id':_0x103224(0x1a1),'sticker-pack-name':_0x507542[_0x103224(0x19a)],'sticker-pack-publisher':_0x507542[_0x103224(0x1a4)],'emojis':_0x507542[_0x103224(0x177)]?_0x507542[_0x103224(0x177)]:['']},_0x6e7f95=Buffer[_0x103224(0x18f)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x2d1e41=Buffer[_0x103224(0x18f)](JSON[_0x103224(0x17a)](_0x1ca0b4),_0x103224(0x18e)),_0x2372e9=Buffer[_0x103224(0x1ab)]([_0x6e7f95,_0x2d1e41]);return _0x2372e9[_0x103224(0x179)](_0x2d1e41[_0x103224(0x1a7)],0xe,0x4),await _0x4aea1f[_0x103224(0x195)](_0x4822fa),fs[_0x103224(0x187)](_0x4822fa),_0x4aea1f[_0x103224(0x196)]=_0x2372e9,await _0x4aea1f[_0x103224(0x1a2)](_0x4e59a1),_0x4e59a1;}}async function writeExif(_0x3d0d48,_0x25e5e0){const _0x469492=a0_0x25ad63;let _0x359c7b=/webp/['test'](_0x3d0d48[_0x469492(0x186)])?_0x3d0d48[_0x469492(0x174)]:/image/['test'](_0x3d0d48['mimetype'])?await imageToWebp(_0x3d0d48['data']):/video/[_0x469492(0x173)](_0x3d0d48['mimetype'])?await videoToWebp(_0x3d0d48[_0x469492(0x174)]):'';const _0x463f53=path[_0x469492(0x172)](tmpdir(),Crypto[_0x469492(0x1aa)](0x6)[_0x469492(0x1a0)](0x0,0x6)[_0x469492(0x19e)](0x24)+_0x469492(0x18c)),_0x3a3732=path[_0x469492(0x172)](tmpdir(),Crypto[_0x469492(0x1aa)](0x6)[_0x469492(0x1a0)](0x0,0x6)['toString'](0x24)+'.webp');fs[_0x469492(0x188)](_0x463f53,_0x359c7b);if(_0x25e5e0[_0x469492(0x19a)]||_0x25e5e0[_0x469492(0x1a4)]){const _0x133a59=new webp['Image'](),_0xf2937b={'sticker-pack-id':_0x469492(0x1a1),'sticker-pack-name':_0x25e5e0[_0x469492(0x19a)],'sticker-pack-publisher':_0x25e5e0[_0x469492(0x1a4)],'emojis':_0x25e5e0[_0x469492(0x177)]?_0x25e5e0[_0x469492(0x177)]:['']},_0x1b7afe=Buffer[_0x469492(0x18f)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x1a30ee=Buffer[_0x469492(0x18f)](JSON['stringify'](_0xf2937b),_0x469492(0x18e)),_0x5de736=Buffer[_0x469492(0x1ab)]([_0x1b7afe,_0x1a30ee]);return _0x5de736[_0x469492(0x179)](_0x1a30ee[_0x469492(0x1a7)],0xe,0x4),await _0x133a59[_0x469492(0x195)](_0x463f53),fs[_0x469492(0x187)](_0x463f53),_0x133a59[_0x469492(0x196)]=_0x5de736,await _0x133a59[_0x469492(0x1a2)](_0x3a3732),_0x3a3732;}}const {Image}=require(a0_0x25ad63(0x189)),{format}=require(a0_0x25ad63(0x19c));async function addExif(_0x9011df,_0x191307,_0x4f901c,_0x26d22e=[''],_0x3d63d4={}){const _0x45c6bb=a0_0x25ad63,_0x4be466=new Image(),_0x5684dc={'sticker-pack-id':_0x45c6bb(0x192),'sticker-pack-name':_0x191307,'sticker-pack-publisher':_0x4f901c,'emojis':_0x26d22e,'is-avatar-sticker':0x1,..._0x3d63d4};let _0x3904d9=Buffer[_0x45c6bb(0x18f)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x5b2d93=Buffer[_0x45c6bb(0x18f)](JSON[_0x45c6bb(0x17a)](_0x5684dc),_0x45c6bb(0x17c)),_0x52403f=Buffer[_0x45c6bb(0x1ab)]([_0x3904d9,_0x5b2d93]);return _0x52403f[_0x45c6bb(0x179)](_0x5b2d93[_0x45c6bb(0x1a7)],0xe,0x4),await _0x4be466['load'](_0x9011df),_0x4be466[_0x45c6bb(0x196)]=_0x52403f,await _0x4be466[_0x45c6bb(0x1a2)](null);}module['exports']={'addExif':addExif,'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif};