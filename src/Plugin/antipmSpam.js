const a0_0x14538e=a0_0x2080;(function(_0x3ee584,_0x1a0d03){const _0x473f2b=a0_0x2080,_0x3f7cbb=_0x3ee584();while(!![]){try{const _0x61c54=parseInt(_0x473f2b(0x99))/0x1*(-parseInt(_0x473f2b(0xe3))/0x2)+-parseInt(_0x473f2b(0xc6))/0x3*(parseInt(_0x473f2b(0xd8))/0x4)+-parseInt(_0x473f2b(0xb7))/0x5*(-parseInt(_0x473f2b(0xc3))/0x6)+parseInt(_0x473f2b(0xbf))/0x7*(parseInt(_0x473f2b(0xd4))/0x8)+-parseInt(_0x473f2b(0xcd))/0x9+parseInt(_0x473f2b(0xa0))/0xa*(-parseInt(_0x473f2b(0x9c))/0xb)+parseInt(_0x473f2b(0xc5))/0xc;if(_0x61c54===_0x1a0d03)break;else _0x3f7cbb['push'](_0x3f7cbb['shift']());}catch(_0x4cbd25){_0x3f7cbb['push'](_0x3f7cbb['shift']());}}}(a0_0x3eea,0xb030d));const {Sequelize,DataTypes}=require(a0_0x14538e(0xbe)),path=require(a0_0x14538e(0xb3)),fs=require('fs'),chokidar=require(a0_0x14538e(0xae));class AntiPmSpam{constructor(){const _0x40621c=a0_0x14538e;this['messageCounter']=new Map(),this[_0x40621c(0x95)]=new Map(),this['db']=null,this[_0x40621c(0x9f)]=null,this[_0x40621c(0xc4)]=![],this[_0x40621c(0xa4)]=![],this[_0x40621c(0xc0)]=null;}async[a0_0x14538e(0xb5)](){const _0x127b30=a0_0x14538e;if(this[_0x127b30(0xa4)])return;this[_0x127b30(0xa4)]=!![];try{const _0x2f4722=path[_0x127b30(0xd2)](__dirname,'..','Database');!fs[_0x127b30(0xca)](_0x2f4722)&&fs[_0x127b30(0xe7)](_0x2f4722,{'recursive':!![]});this['db']&&await this['db'][_0x127b30(0x9b)]();this[_0x127b30(0xc0)]&&await this[_0x127b30(0xc0)][_0x127b30(0x9b)]();this['db']=new Sequelize({'dialect':'sqlite','storage':path['join'](_0x2f4722,'permitted_users.db'),'logging':![],'pool':{'max':0x5,'min':0x0,'acquire':0x7530,'idle':0x2710}}),this[_0x127b30(0x9f)]=this['db'][_0x127b30(0xb8)]('PermittedUsers',{'userId':{'type':DataTypes['STRING'],'primaryKey':!![],'allowNull':![]},'permittedBy':{'type':DataTypes['STRING'],'allowNull':![]},'reason':{'type':DataTypes[_0x127b30(0xdf)],'allowNull':!![]},'messageCount':{'type':DataTypes[_0x127b30(0xc2)],'defaultValue':0x0,'allowNull':![]},'lastMessageTime':{'type':DataTypes[_0x127b30(0xda)],'allowNull':!![]}}),await this['db'][_0x127b30(0xe0)]();let _0x48da0a;this[_0x127b30(0xc0)]=chokidar[_0x127b30(0x94)](path['join'](_0x2f4722,_0x127b30(0xa3)),{'persistent':!![],'ignoreInitial':!![],'awaitWriteFinish':{'stabilityThreshold':0x7d0,'pollInterval':0x64}}),this['watcher']['on'](_0x127b30(0x9d),async()=>{_0x48da0a&&clearTimeout(_0x48da0a),_0x48da0a=setTimeout(async()=>{const _0x56ac65=a0_0x2080;try{this['db'][_0x56ac65(0xdc)]['models']&&await Promise['all'](this['db'][_0x56ac65(0xdc)]['models']['map'](_0x671bf3=>{const _0x4ee865=_0x56ac65;return _0x671bf3['cache']&&_0x671bf3[_0x4ee865(0xaa)][_0x4ee865(0xb2)](),Promise['resolve']();}));}catch(_0x6809b){console[_0x56ac65(0xce)](_0x56ac65(0xcf),_0x6809b);}},0x3e8);}),this[_0x127b30(0xc4)]=!![],console[_0x127b30(0xd3)](_0x127b30(0xc1));}catch(_0x4fe79f){console['error'](_0x127b30(0xc9),_0x4fe79f);throw _0x4fe79f;}finally{this[_0x127b30(0xa4)]=![];}}async['ensureInitialized'](){const _0x4ed7ad=a0_0x14538e;return!this['isInitialized']&&await this[_0x4ed7ad(0xb5)](),!![];}async[a0_0x14538e(0xab)](_0x2178bf){const _0xa964ae=a0_0x14538e;await this['ensureInitialized']();try{const _0x3f9709=await this['PermittedUsers'][_0xa964ae(0xd6)]({'where':{'userId':_0x2178bf}});return!!_0x3f9709;}catch(_0x132e58){return console[_0xa964ae(0xce)]('Error\x20checking\x20permitted\x20status:',_0x132e58),![];}}async[a0_0x14538e(0xdb)](_0x32a273,_0x26f4c4,_0x3916b9=''){const _0x7b55a2=a0_0x14538e;await this['ensureInitialized']();try{const _0x59a3b2=this['messageCounter']['get'](_0x32a273)||0x0;return await this[_0x7b55a2(0x9f)]['upsert']({'userId':_0x32a273,'permittedBy':_0x26f4c4,'reason':_0x3916b9,'messageCount':_0x59a3b2,'lastMessageTime':new Date()}),this[_0x7b55a2(0xbd)][_0x7b55a2(0xa6)](_0x32a273),this[_0x7b55a2(0x95)][_0x7b55a2(0xa6)](_0x32a273),!![];}catch(_0x40a3b1){return console['error'](_0x7b55a2(0xde),_0x40a3b1),![];}}async[a0_0x14538e(0x98)](_0x1238f9){const _0x24794a=a0_0x14538e;await this[_0x24794a(0x97)]();try{return await this['PermittedUsers'][_0x24794a(0xc7)]({'where':{'userId':_0x1238f9}}),this['messageCounter'][_0x24794a(0xa6)](_0x1238f9),this[_0x24794a(0x95)][_0x24794a(0xa6)](_0x1238f9),!![];}catch(_0x4261ed){return console[_0x24794a(0xce)](_0x24794a(0xd7),_0x4261ed),![];}}async[a0_0x14538e(0xe2)](){const _0x498390=a0_0x14538e;await this[_0x498390(0x97)]();try{const _0x15176c=await this[_0x498390(0x9f)][_0x498390(0xad)]();return _0x15176c[_0x498390(0xd1)](_0x55f72c=>_0x55f72c[_0x498390(0xcb)]);}catch(_0x51bce8){return console['error'](_0x498390(0xa7),_0x51bce8),[];}}['getWarningMessage'](_0x194312,_0x3bb6dc){const _0x2bd6c1=a0_0x14538e,_0x3ca609=_0x3bb6dc-_0x194312;return _0x2bd6c1(0xc8)+_0x2bd6c1(0x9a)+(_0x2bd6c1(0xb9)+_0x194312+'/'+_0x3bb6dc+_0x2bd6c1(0xaf))+(_0x2bd6c1(0xa5)+_0x3ca609+_0x2bd6c1(0xdd)+(_0x3ca609!==0x1?'s':'')+_0x2bd6c1(0xd0))+'```Further\x20messages\x20without\x20permission\x20will\x20result\x20in\x20being\x20blocked.```\x20\x0a\x0a'+_0x2bd6c1(0xcc)+_0x2bd6c1(0xb1)+_0x2bd6c1(0x93);}async[a0_0x14538e(0xd5)](_0x4f1a2a,_0x24fbc3){const _0x156fc9=a0_0x14538e;if(!await this[_0x156fc9(0x97)]())return![];if(!global[_0x156fc9(0xbb)]?.[_0x156fc9(0xac)]||!_0x24fbc3[_0x156fc9(0xa2)]?.[_0x156fc9(0x9e)]||_0x24fbc3[_0x156fc9(0xa2)][_0x156fc9(0x9e)][_0x156fc9(0xe4)]('@g.us')||_0x24fbc3[_0x156fc9(0xa2)][_0x156fc9(0x9e)][_0x156fc9(0xe4)]('@newsletter')||_0x24fbc3[_0x156fc9(0xa2)][_0x156fc9(0x9e)]===_0x156fc9(0xba))return![];const _0x31e5f1=_0x24fbc3[_0x156fc9(0xa2)][_0x156fc9(0x9e)],_0x25bf09=global[_0x156fc9(0xbb)]?.[_0x156fc9(0xe6)]||'',_0x3e1715=_0x25bf09+_0x156fc9(0xe1);if(_0x31e5f1===_0x4f1a2a[_0x156fc9(0xe5)]['id']||_0x31e5f1===_0x3e1715||_0x24fbc3[_0x156fc9(0xa2)]['fromMe'])return![];if(await this['isPermitted'](_0x31e5f1))return![];const _0x401d89=(this[_0x156fc9(0xbd)]['get'](_0x31e5f1)||0x0)+0x1;this[_0x156fc9(0xbd)]['set'](_0x31e5f1,_0x401d89);const _0x3c6589=global[_0x156fc9(0xbb)]['ANTI_PM_SPAM_COUNT'],_0xa5806d=this[_0x156fc9(0xd9)](_0x401d89,_0x3c6589),_0x50b755=this[_0x156fc9(0x95)][_0x156fc9(0xa8)](_0x31e5f1);if(_0x50b755)await _0x4f1a2a['sendMessage'](_0x31e5f1,{'text':_0xa5806d,'edit':_0x50b755});else{const _0x4b90d7=await _0x4f1a2a[_0x156fc9(0xa9)](_0x31e5f1,{'text':_0xa5806d});this[_0x156fc9(0x95)][_0x156fc9(0xa1)](_0x31e5f1,_0x4b90d7[_0x156fc9(0xa2)]);}const _0x57a356=_0x3c6589-_0x401d89;_0x57a356>0x0&&await _0x4f1a2a[_0x156fc9(0xa9)](_0x31e5f1,{'text':'‚ùó\x20'+_0x57a356+_0x156fc9(0xdd)+(_0x57a356!==0x1?'s':'')+_0x156fc9(0xbc),'edit':_0x24fbc3[_0x156fc9(0xa2)]});if(_0x401d89>=_0x3c6589){const _0x353952=_0x156fc9(0x96);await _0x4f1a2a[_0x156fc9(0xa9)](_0x31e5f1,{'text':_0x353952}),await _0x4f1a2a[_0x156fc9(0xb0)](_0x31e5f1,'block'),this[_0x156fc9(0xbd)][_0x156fc9(0xa6)](_0x31e5f1),this[_0x156fc9(0x95)][_0x156fc9(0xa6)](_0x31e5f1);const _0x136cc2='*üö´\x20ANTI-PM\x20SPAM*\x0aBlocked\x20user\x20@'+_0x31e5f1[_0x156fc9(0xb4)]('@')[0x0]+'\x20for\x20exceeding\x20the\x20message\x20limit.';return await _0x4f1a2a[_0x156fc9(0xa9)](_0x3e1715,{'text':_0x136cc2,'mentions':[_0x31e5f1]}),!![];}return![];}}function a0_0x3eea(){const _0x55ab10=['log','384difsYT','handleMessage','findOne','Error\x20revoking\x20permission:','405404YruiXs','getWarningMessage','DATE','permit','modelManager','\x20message','Error\x20permitting\x20user:','STRING','sync','@s.whatsapp.net','getAllPermittedUsers','2cCYKnB','endsWith','user','OWNER_NUMBERS','mkdirSync','>\x20¬Æ\x20KordAi\x20WhatsApp\x20Bot','watch','warningMessageIds','*üö´\x20ANTI-PM\x20SPAM*\x0a```You\x20have\x20exceeded\x20the\x20message\x20limit\x20and\x20my\x20owner\x20has\x20not\x20granted\x20permission.\x20You\x20will\x20be\x20blocked\x20immediately.```','ensureInitialized','revoke','1174854MDEWjl','```Currently,\x20Anti-Spam\x20is\x20enabled\x20to\x20prevent\x20spam\x20on\x20DM.```\x20\x0a','close','11kfcwea','change','remoteJid','PermittedUsers','1526230HXjuyG','set','key','permitted_users.db','isInitializing','```','delete','Error\x20fetching\x20permitted\x20users:','get','sendMessage','cache','isPermitted','ANTI_PM_SPAM','findAll','chokidar','\x20messages.```\x20\x0a','updateBlockStatus','>\x20Thank\x20you\x20for\x20your\x20patience\x0a','clear','path','split','initialize','exports','5XCttjR','define','```You\x20have\x20sent\x20','status@broadcast','settings','\x20remaining','messageCounter','sequelize','134834THuRyP','watcher','Anti\x20PM\x20Spam\x20database\x20initialized\x20successfully','INTEGER','6782460DRsWAP','isInitialized','24028476YQiDuK','24zlKbsJ','destroy','*‚ö†Ô∏è\x20ANTI-PM\x20SPAM\x20WARNING*\x20\x0a\x0a','Failed\x20to\x20initialize\x20Anti\x20PM\x20Spam\x20database:','existsSync','dataValues','```Kindly\x20wait\x20for\x20my\x20owner\x27s\x20approval.```\x0a\x0a','10776573NIyoHC','error','Error\x20in\x20watcher\x20callback:','\x20remaining\x20before\x20being\x20blocked.```\x20\x0a','map','join'];a0_0x3eea=function(){return _0x55ab10;};return a0_0x3eea();}function a0_0x2080(_0x585f38,_0x5408d1){const _0x3eeac1=a0_0x3eea();return a0_0x2080=function(_0x208083,_0x58fd61){_0x208083=_0x208083-0x93;let _0x1ff1d0=_0x3eeac1[_0x208083];return _0x1ff1d0;},a0_0x2080(_0x585f38,_0x5408d1);}const antiPmSpam=new AntiPmSpam();module[a0_0x14538e(0xb6)]=antiPmSpam;